<!DOCTYPE html>
<html>
<head>
  <title>Reproducir Playlist de YouTube</title>
</head>
<body>

  <video id="videoPlayer" controls crossorigin="anonymous">
    <source src="..." type="video/mp4">
  </video>

  <script>
    // Crea el elemento iframe
    let player; 
    // ID de los primeros 3 videos
    const videoIds = ['3yiVDrX6vG0', 'CrzGdIOqOJM', 'cmpRLQZkTb8']; 
    let currentVideoIndex = 0;
    // URL de la playlist
    const playlistUrl = 'https://www.youtube.com/playlist?list=PLk6yrJCXLVNGubc2vSTn85x4wxf2DNo0J&key=AIzaSyABAbMEP_2fcPg3m5ULfk51Unf_SmaHl3w';
    
    function createPlayer() {
      player = document.createElement('iframe');
      player.width = 560;
      player.height = 315;
      player.src = 'https://www.youtube.com/embed/' + videoIds[currentVideoIndex];
      document.body.appendChild(player);
    }
      
    // Carga el primer video en el reproductor
    loadVideo(videoIds[currentVideoIndex]); 

    // Reproduce el siguiente video cuando termina el actual
    player.onended = function() {

      showCountdown(); // muestra 5,4,3,2,1
    
      loadNextVideo();
    
      playVideo();
    
    }

    function playVideo() {
      player.play();
    }

    function loadNextVideo() {
      // obt√©n siguiente video
      currentVideoIndex++;
      // asigna siguiente video a player
      loadVideo(videoIds[currentVideoIndex]);
    }
    
    function loadVideo(videoId) {
      if (player) {
        player.remove(); 
      }
    
      createPlayer(videoIds[currentVideoIndex]);
      
      videoIds.shift();

      

      // Obtiene el siguiente video con JSONP
      getNextVideo(playlistUrl, function(data) {
        const nextVideoId = data.videoIds[0];
        videoIds.push(nextVideoId);
      });
    }

    function getNextVideo(url, callback) {
      const script = document.createElement('script');
      script.src = url + '&callback=callback';
      document.body.appendChild(script);
    }
  </script>

</body>
</html>
